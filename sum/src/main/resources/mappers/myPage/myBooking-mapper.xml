<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.kh.sum.myPage.model.mapper.MyBookingMapper">
	<sql id="MyBookingListSql">
		SELECT  T.TICKET_NO,
		        T.MOVIE_TITLE,
		        T.CINEMA_NAME,
		        T.SHOW_DATE,
		        T.TICKET_DATE,
		        T.MEMBER_NO,
		        T.SHOW_NO,
		        T.STATUS
		FROM TICKETING T
		JOIN MEMBER M ON(T.MEMBER_NO = M.MEMBER_NO)
		WHERE T.STATUS = 'Y'
	</sql>
	
	<resultMap type="Ticketing" id="MyBookingListResultMap">
		<id property="no" column="TICKET_NO"/>
		<result property="movieTitle" column="MOVIE_TITLE"/>
		<result property="cinemaName" column="CINEMA_NAME"/>
		<result property="showDate" column="SHOW_DATE"/>
		<result property="ticketDate" column="TICKET_DATE"/>
		<result property="memberNo" column="MEMBER_NO"/>
		<result property="showNo" column="SHOW_NO"/>
		<result property="status" column="STATUS"/>
	</resultMap>

    <!-- 게시글 목록 조회(전체 목록) -->
	<select id="selectMyBookingCount" resultType="_int">
		SELECT COUNT(*) FROM TICKETING WHERE STATUS='Y'
	</select>

	<select id="selectAll" resultMap="MyBookingListResultMap">
		<include refid="MyBookingListSql" />
		ORDER BY T.TICKET_NO DESC
	</select>
	
	
</mapper>
